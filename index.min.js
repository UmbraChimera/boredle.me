function showOptions(){document.getElementById("options-container").style.display="block"}function loadWebsite(e){var t=document.createElement("iframe");t.src=e,t.onload=function(){t.contentDocument&&""===t.contentDocument.body.innerHTML&&window.open(e,"_blank")},t.onerror=function(){window.open(e,"_blank")},document.getElementById("iframe-container").innerHTML="",document.getElementById("iframe-container").appendChild(t)}function nextWebsite(){currentIndex=(currentIndex+1)%selectedWebsites.length,document.querySelector("#iframe-container iframe").src=selectedWebsites[currentIndex],displayProgress(),updateUrl()}function prevWebsite(){currentIndex=(currentIndex-1+selectedWebsites.length)%selectedWebsites.length,document.querySelector("#iframe-container iframe").src=selectedWebsites[currentIndex],displayProgress(),updateUrl()}function selectAll(){var e=document.getElementById("select-all"),t=document.querySelectorAll("input[name='website']");t.forEach(function(t){t.checked=e.checked})}function getUrlParams(){var e=new URLSearchParams(window.location.search);return e.get("websites")?e.get("websites").split(","):[]}function addCustomURL(){var e=document.getElementById("custom-url").value.trim();if(""!==e){e.includes("://")||(e="https://"+e);var t=document.createElement("input");t.type="checkbox",t.name="website",t.value=e;var n=document.createElement("label");n.appendChild(t),n.appendChild(document.createTextNode(e)),document.getElementById("options-form").insertBefore(n,document.getElementById("custom-url").parentNode),t.checked=!0,document.getElementById("custom-url").value=""}}function displayProgress(){var e=document.getElementById("progress");e.textContent=currentIndex+1+"/"+selectedWebsites.length}function updateUrl(){var e="websites=";e+=selectedWebsites.join(","),history.pushState(null,null,window.location.pathname+"?"+e)}var currentIndex=0,selectedWebsites=[];document.getElementById("options-form").addEventListener("submit",function(e){e.preventDefault();var t=document.querySelectorAll("input[name='website']:checked");selectedWebsites=[],t.forEach(function(e){selectedWebsites.push(e.value)}),selectedWebsites.length>0?(document.getElementById("options-container").style.display="none",document.getElementById("iframe-container").style.display="block",document.querySelectorAll(".toolbar button").forEach(function(e){e.style.display="inline-block"}),document.getElementById("donate").style.height="4em",document.getElementById("donate").style.width="8em",loadWebsite(selectedWebsites[currentIndex]),displayProgress(),updateUrl()):alert("Please select at least one website or add a custom URL.")}),window.onload=function(){showOptions();var e=getUrlParams();if(e.length>0){var t=document.querySelectorAll("input[name='website']");t.forEach(function(t){e.includes(t.value)&&(t.checked=!0,selectedWebsites.includes(t.value)||selectedWebsites.push(t.value))})}var n=e.filter(e=>!selectedWebsites.includes(e));n.forEach(function(e){if(!selectedWebsites.includes(e)){selectedWebsites.push(e);var t=document.createElement("input");t.type="checkbox",t.name="website",t.value=e,t.checked=!0;var n=document.createElement("label");n.appendChild(t),n.appendChild(document.createTextNode(e)),document.getElementById("options-form").insertBefore(n,document.getElementById("custom-url").parentNode)}})};