function showOptions(){document.getElementById("options-container").style.display="block"}function loadWebsite(e){const t=document.getElementById("iframe-container"),n=document.createElement("iframe");n.src=e,n.onload=function(){n.contentDocument&&""===n.contentDocument.body.innerHTML&&window.open(e,"_blank")},n.onerror=function(){window.open(e,"_blank")},t.innerHTML="",t.appendChild(n)}function nextWebsite(){currentIndex=(currentIndex+1)%selectedWebsites.length,document.querySelector("#iframe-container iframe").src=selectedWebsites[currentIndex],displayProgress(),updateUrl()}function prevWebsite(){currentIndex=(currentIndex-1+selectedWebsites.length)%selectedWebsites.length,document.querySelector("#iframe-container iframe").src=selectedWebsites[currentIndex],displayProgress(),updateUrl()}function selectAll(){const e=document.getElementById("select-all"),t=document.querySelectorAll("input[name='website']");t.forEach(t=>t.checked=e.checked)}function getUrlParams(){const e=new URLSearchParams(window.location.search);return e.get("websites")?e.get("websites").split(","):[]}function addCustomURL(){let e=document.getElementById("custom-url").value.trim();if(""!==e){e.includes("://")||(e="https://"+e);const t=document.createElement("input");t.type="checkbox",t.name="website",t.value=e;const n=document.createElement("label");n.appendChild(t),n.appendChild(document.createTextNode(e)),document.getElementById("custom_dles").insertBefore(n,document.getElementById("custom-url").parentNode),t.checked=!0,document.getElementById("custom-url").value=""}}function displayProgress(){const e=document.getElementById("progress");e.textContent=`${currentIndex+1}/${selectedWebsites.length}`}function updateUrl(){const e="websites="+selectedWebsites.join(",");history.pushState(null,null,window.location.pathname+"?"+e)}let currentIndex=0,selectedWebsites=[];document.getElementById("options-form").addEventListener("submit",function(e){e.preventDefault();const t=document.querySelectorAll("input[name='website']:checked");if(selectedWebsites=Array.from(t,e=>e.value),selectedWebsites.length>0){const e=document.getElementById("options-container");e.style.display="none",document.getElementById("select_text").style.display="none",document.getElementById("iframe-container").style.display="block",document.querySelectorAll("#nav button").forEach(e=>e.style.display="inline-block"),document.getElementById("launch_button").style.display="none",document.getElementById("donate").style.cssText="height: 4em; width: 8em;",loadWebsite(selectedWebsites[currentIndex]),displayProgress(),updateUrl()}else alert("Please select at least one website or add a custom URL.")}),window.onload=function(){showOptions();const e=getUrlParams();if(e.length>0){const t=document.querySelectorAll("input[name='website']");t.forEach(t=>{e.includes(t.value)&&(t.checked=!0,selectedWebsites.includes(t.value)||selectedWebsites.push(t.value))})}const t=e.filter(e=>!selectedWebsites.includes(e));t.forEach(e=>{if(!selectedWebsites.includes(e)){selectedWebsites.push(e);const t=document.createElement("input");t.type="checkbox",t.name="website",t.value=e,t.checked=!0;const n=document.createElement("label");n.appendChild(t),n.appendChild(document.createTextNode(e)),document.getElementById("custom_dles").insertBefore(n,document.getElementById("custom-url").parentNode)}})};